---
layout:     post
title:      操作系统复习(持续更新)
subtitle:   概述
date:       2021-02-15
author:     QuanLi
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - 操作系统
---

# 操作系统

### 什么是cpu上下文，什么是cpu上下文切换

​	**CPU上下文**就是cpu运行任务前依赖的环境，具体一点说就是寄存器、程序计数器。

​	**CPU上下文切换**就是将前一个任务的CPU上下文保存起来，然后加载新任务的上下文到程序计数器和寄存器。，最后跳转到程序计数器所指新位置，运行新任务。

### 什么是系统调用，为何要用系统调用

​	系统调用就是运行在用户态的程序向内核态请求更高权限运行的服务，如I/O操作、进程管理，文件管理。

### 内核态和用户态有什么区别、为什么要分内核态和用户态、如何切换？

1. 用户态和内核态区别：

   - 用户态运行用户程序
   - 内核态运行操作系统程序，操作硬件

   - 特权环Ring0是核心态，Ring3是用户态

   - **用户态--->内核态：**唯一途径是通过中断、异常、陷入机制（访管指令）

     **内核态--->用户态：**设置程序状态字PSW

   

2. 为何要区分：这样用户不能随便操作内核地址空间，起完全保护作用

### 系统调用过程

- cpu执行到一个陷入指令（访管指令）切换到内核态
- 硬件保护现场，将控制权交给系统调用入口程序，系统调用入口程序根据调用号调用处理函数。
- 执行处理函数
- 恢复被中断进程

### 什么是虚拟内存

​	虚拟内存是指，使得程序以为它拥有连续可用的内存（一个完整的地址空间），为进程提供一个假象，每个进程都在独占地使用主存，但实际上它被分割为多个物理碎片。将程序部分地址空间装入主存，部分留在磁盘，并在需要的时间交换它们。

​	这样做的好处是可以节省内存空间，保护每个进程地址空间不被其他进程破坏。



