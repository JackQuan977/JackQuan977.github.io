---
layout:     post
title:      红黑树
subtitle:   概述
date:       2021-02-22
author:     QuanLi
header-img: img/post-bg-2015.jpg
catalog: true
tags:
    - 数据结构
---

# 红黑树

​		JDK 1.8 后，HashMap 中，如果一条链表的长度大于 8，且哈希桶的个数大于等于 64 时，这条链表就会转化为红黑树。红黑树在面试时一般会考察其基本的特性，进阶一点会考察左旋右旋的方式，极致的考察就会让面试者写出在红黑树中插入/删除节点的代码。

### 定义

​	红黑树其实就是一棵可以**自平衡**的二叉查找树，为了方便自平衡，它将其每个节点都标记了颜色，红色和黑色，红黑树由此得名。

### 从2-3树到红黑树

​	由于2-3树为了保持平衡性，在维护的时候是需要大量的节点交换的！这些变换在实际代码中是很复杂

的，大佬们在**2-3**树的理论基础上发明了红黑树。红黑树是对2-3查找树的改进，它能用一种统一的方式完成所有变换。

### 性质

- 每个节点要么是黑色，要么是红色
- 根节点是黑色
- 每个叶子节点（NIL）都是黑色
- 每个红色节点的两个子节点都一定是黑色（从叶子到根的所有路径不能存在连续的红节点）
- **任意一节点到叶子节到每个叶子节点的路径都包含数量相同的黑色节点**

![image-20210222190443670](C:\Users\ql\AppData\Roaming\Typora\typora-user-images\image-20210222190443670.png)

如图可以看出，红黑树并不是一棵**完美平衡**的二叉查找树，根节点 P 的左子树比右子树要高，但是根据性质 5 可以看出，左子树和右子树的黑色节点的层数是相等的，所以可以说，红黑树是 **黑色节点完美平衡**的。

红黑树的平衡主要靠三种操作：**左旋、右旋和变色**。

### B树，B+树，红黑树应用场景

- B树大量应用在数据库和文件系统当中
- mysql使用B+树作为索引
- 红黑树往往出现由于树的深度过大而造成磁盘IO读写过于频繁，进而导致效率低下的情况在数据较小，可以完全放到内存中时，红黑树的时间复杂度比B树低。如linux中进程的调度用的是红黑树。